<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Project3</title>
    <link rel="stylesheet" type="text/css" href="./project.css">
   <!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&display=swap" rel="stylesheet">-->
    <!-- add jquery library-->
   <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" defer>
    </script> -->
    <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="./project.js" defer></script>
    <script type="text/javascript">
        var auarr =[];
       $(function () {
            //var au = document.getElementById("myAudio");
            var arrs = window.localStorage.getItem("arr");
            if (arrs != null && arrs.length > 0) {
                var videoarr = arrs.split(",");
                if (videoarr != null && videoarr.length > 0) {
                    for (var i = 0; i < videoarr.length; i++) {
                        auarr.push("./assert/do,re/"+videoarr[i]);
                    }
                }

            }
            else { alert("数组为空"); return; }

            document.body.addEventListener('mousedown', function(){
            var vdo = $("video")[0]; //jquery
          
            vdo.muted = false;
            if(auarr != null && auarr.length > 0)
            {
                var au = new Audio(); 
                au.preload = true; 
                au.controls = true; 
                au.src = auarr.shift();         //每次读数组第一个元素 
                au.addEventListener('ended', playEndedHandler, false); 
                au.play(); 
                document.getElementById("divaudio").appendChild(au); 
                au.loop = false;//禁止循环，否则无法触发ended事件 
                function playEndedHandler(){ 
                    au.src = auarr.shift(); 
                    au.play(); 
                    console.log($(au).attr("src")); 
                    !auarr.length && au.removeEventListener('ended',playEndedHandler,false);//只有一个元素时解除绑定 
                } 
            }
        }, false);  

        })

      
    </script>
</head>

<body>
    <video id="video1" muted="true" loop="true" width="100%" height="100%">
        <source src="mymovie.mp4">
    </video>
    <div id="divaudio" style="display: none;">

    </div>
    <audio id="myAudio" style="display: none;" controls>
        <!-- <source src="/i/horse.ogg" type="audio/ogg"> -->
        <source src="./assert/do,re/do.wav" type="audio/mpeg">
        <source src="./assert/do,re/re.wav" type="audio/mpeg">
        <source src="./assert/do,re/mi.wav" type="audio/mpeg">
        <source src="./assert/do,re/fa.wav" type="audio/mpeg">
        <source src="./assert/do,re/so.wav" type="audio/mpeg">
        <source src="./assert/do,re/la.wav" type="audio/mpeg">
        <source src="./assert/do,re/si.wav" type="audio/mpeg">
    </audio>
</body>

</html>